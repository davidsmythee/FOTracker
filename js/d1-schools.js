// Division 1 Universities with Lacrosse Teams
export const d1LacrosseSchools = [
    { name: "Bellarmine University", city: "Louisville, Kentucky", conference: "ASUN Conference", color: "#8B0015", secondaryColor: "#FFFFFF" },
    { name: "Boston University", city: "Boston, Massachusetts", conference: "Patriot League", color: "#CC0000", secondaryColor: "#FFFFFF" },
    { name: "Brown University", city: "Providence, Rhode Island", conference: "Ivy League", color: "#4E3629", secondaryColor: "#E4C6A6" },
    { name: "Bryant University", city: "Smithfield, Rhode Island", conference: "American East Conference", color: "#000000", secondaryColor: "#C5B783" },
    { name: "Bucknell University", city: "Lewisburg, Pennsylvania", conference: "Patriot League", color: "#003865", secondaryColor: "#EF7D00" },
    { name: "Canisius College", city: "Buffalo, New York", conference: "Metro Atlantic Athletic Conference", color: "#003DA5", secondaryColor: "#FFD700" },
    { name: "Cleveland State University", city: "Cleveland, Ohio", conference: "Horizon League", color: "#00594E", secondaryColor: "#FFFFFF" },
    { name: "Colgate University", city: "Hamilton, New York", conference: "Patriot League", color: "#821019", secondaryColor: "#FFFFFF" },
    { name: "College of the Holy Cross", city: "Worcester, Massachusetts", conference: "Patriot League", color: "#602D89", secondaryColor: "#FFFFFF" },
    { name: "Cornell University", city: "Ithaca, New York", conference: "Ivy League", color: "#B31B1B", secondaryColor: "#FFFFFF" },
    { name: "Dartmouth College", city: "Hanover, New Hampshire", conference: "Ivy League", color: "#00693E", secondaryColor: "#FFFFFF" },
    { name: "Drexel University", city: "Philadelphia, Pennsylvania", conference: "Colonial Athletic Association", color: "#07294D", secondaryColor: "#FFC600" },
    { name: "Duke University", city: "Durham, North Carolina", conference: "Atlantic Coast Conference", color: "#003087", secondaryColor: "#FFFFFF" },
    { name: "Fairfield University", city: "Fairfield, Connecticut", conference: "Metro Atlantic Athletic Conference", color: "#BA0C2F", secondaryColor: "#FFFFFF" },
    { name: "Georgetown University", city: "Washington, District Of Columbia", conference: "Big East Conference", color: "#041E42", secondaryColor: "#8D817B" },
    { name: "Hampton University", city: "Hampton, Virginia", conference: "Colonial Athletic Association", color: "#00529B", secondaryColor: "#FFFFFF" },
    { name: "Harvard University", city: "Cambridge, Massachusetts", conference: "Ivy League", color: "#A51C30", secondaryColor: "#FFFFFF" },
    { name: "High Point University", city: "High Point, North Carolina", conference: "Big South Conference", color: "#330072", secondaryColor: "#FFFFFF" },
    { name: "Hobart & William Smith College", city: "Geneva, New York", conference: "Atlantic 10 Conference", color: "#F58025", secondaryColor: "#330072" },
    { name: "Hofstra University", city: "Hempstead, New York", conference: "Colonial Athletic Association", color: "#00416D", secondaryColor: "#FFB81C" },
    { name: "Iona University", city: "New Rochelle, New York", conference: "Metro Atlantic Athletic Conference", color: "#862334", secondaryColor: "#FFD700" },
    { name: "Jacksonville University", city: "Jacksonville, Florida", conference: "Atlantic Sun Conference", color: "#006747", secondaryColor: "#FFFFFF" },
    { name: "Johns Hopkins University", city: "Baltimore, Maryland", conference: "Big Ten Conference", color: "#002D72", secondaryColor: "#FFFFFF" },
    { name: "Lafayette College", city: "Easton, Pennsylvania", conference: "Patriot League", color: "#8B0015", secondaryColor: "#FFFFFF" },
    { name: "Lehigh University", city: "Bethlehem, Pennsylvania", conference: "Patriot League", color: "#653819", secondaryColor: "#FFFFFF" },
    { name: "Lindenwood University", city: "Saint Charles, Missouri", conference: "Ohio Valley Conference", color: "#000000", secondaryColor: "#C5B358" },
    { name: "Long Island University", city: "Long Island, New York", conference: "Northeast Conference", color: "#003876", secondaryColor: "#FFD700" },
    { name: "Loyola University Maryland", city: "Baltimore, Maryland", conference: "Patriot League", color: "#006633", secondaryColor: "#8D8D8D" },
    { name: "Manhattan College", city: "Riverdale, New York", conference: "Metro Atlantic Athletic Conference", color: "#005C3C", secondaryColor: "#FFFFFF" },
    { name: "Marist College", city: "Poughkeepsie, New York", conference: "Metro Atlantic Athletic Conference", color: "#C8102E", secondaryColor: "#FFFFFF" },
    { name: "Marquette University", city: "Milwaukee, Wisconsin", conference: "Big East Conference", color: "#003366", secondaryColor: "#FFD700" },
    { name: "Mercer University", city: "Macon, Georgia", conference: "Southern Conference", color: "#FF7900", secondaryColor: "#000000" },
    { name: "Merrimack College", city: "North Andover, Massachusetts", conference: "East Conference", color: "#003DA5", secondaryColor: "#FFD700" },
    { name: "Monmouth University", city: "West Long Branch, New Jersey", conference: "Mid-Eastern Athletic Conference", color: "#00477F", secondaryColor: "#C0C0C0" },
    { name: "Mount St. Mary's University", city: "Emmitsburg, Maryland", conference: "Metro Atlantic Athletic Conference", color: "#003087", secondaryColor: "#FFFFFF" },
    { name: "New Jersey Institute of Technology", city: "Newark, New Jersey", conference: "American East Conference", color: "#C8102E", secondaryColor: "#000000" },
    { name: "Ohio State University", city: "Columbus, Ohio", conference: "Big Ten Conference", color: "#BB0000", secondaryColor: "#666666" },
    { name: "Penn State University", city: "University Park, Pennsylvania", conference: "Big Ten Conference", color: "#041E42", secondaryColor: "#FFFFFF" },
    { name: "Princeton University", city: "Princeton, New Jersey", conference: "Ivy League", color: "#FF8F00", secondaryColor: "#000000" },
    { name: "Providence College", city: "Providence, Rhode Island", conference: "Big East Conference", color: "#000000", secondaryColor: "#C0C0C0" },
    { name: "Queens University of Charlotte", city: "Charlotte, North Carolina", conference: "Atlantic Sun Conference", color: "#003876", secondaryColor: "#C5B783" },
    { name: "Quinnipiac University", city: "Hamden, Connecticut", conference: "Metro Atlantic Athletic Conference", color: "#002855", secondaryColor: "#FFD700" },
    { name: "Robert Morris University", city: "Moon Township, Pennsylvania", conference: "Northeast Conference", color: "#002D72", secondaryColor: "#C41E3A" },
    { name: "Rutgers University", city: "Piscataway, New Jersey", conference: "Big Ten Conference", color: "#CC0033", secondaryColor: "#000000" },
    { name: "Sacred Heart University", city: "Fairfield, Connecticut", conference: "Northeast Conference", color: "#CE1141", secondaryColor: "#FFFFFF" },
    { name: "Saint Joseph's University", city: "Philadelphia, Pennsylvania", conference: "Atlantic 10 Conference", color: "#8B002E", secondaryColor: "#FFFFFF" },
    { name: "Siena College", city: "Loudonville, New York", conference: "Metro Atlantic Athletic Conference", color: "#046A38", secondaryColor: "#FFD700" },
    { name: "St. Bonaventure University", city: "Saint Bonaventure, New York", conference: "Atlantic 10 Conference", color: "#5C2E1F", secondaryColor: "#FFFFFF" },
    { name: "St. John's University", city: "Queens, New York", conference: "Big East Conference", color: "#CE1141", secondaryColor: "#FFFFFF" },
    { name: "SUNY Binghamton University", city: "Vestal, New York", conference: "America East Conference", color: "#005740", secondaryColor: "#FFFFFF" },
    { name: "SUNY Stony Brook University", city: "Stony Brook, New York", conference: "Colonial Athletic Association", color: "#990000", secondaryColor: "#FFFFFF" },
    { name: "SUNY University at Albany", city: "Albany, New York", conference: "America East Conference", color: "#461D7C", secondaryColor: "#FFD700" },
    { name: "Syracuse University", city: "Syracuse, New York", conference: "American Athletics Conference", color: "#D44500", secondaryColor: "#000E54" },
    { name: "Towson University", city: "Towson, Maryland", conference: "Colonial Athletic Association", color: "#FFBA08", secondaryColor: "#000000" },
    { name: "United States Air Force Academy", city: "Usafa, Colorado", conference: "Mountain West Conference", color: "#003087", secondaryColor: "#C0C0C0" },
    { name: "United States Military Academy", city: "West Point, New York", conference: "Patriot League", color: "#000000", secondaryColor: "#C5B358" },
    { name: "United States Naval Academy", city: "Annapolis, Maryland", conference: "Patriot League", color: "#00205B", secondaryColor: "#FFD700" },
    { name: "University of Delaware", city: "Newark, Delaware", conference: "Colonial Athletic Association", color: "#00539F", secondaryColor: "#FFD700" },
    { name: "University of Denver", city: "Denver, Colorado", conference: "The Summit League", color: "#8B2332", secondaryColor: "#FFD700" },
    { name: "University of Detroit Mercy", city: "Detroit, Michigan", conference: "Horizon League", color: "#BF0A30", secondaryColor: "#FFFFFF" },
    { name: "University of Maryland", city: "College Park, Maryland", conference: "Big Ten Conference", color: "#E03A3E", secondaryColor: "#FFD700" },
    { name: "University of Maryland – Baltimore County", city: "Baltimore, Maryland", conference: "America East Conference", color: "#000000", secondaryColor: "#FFD700" },
    { name: "University of Massachusetts – Amherst", city: "Amherst, Massachusetts", conference: "Atlantic 10 Conference", color: "#881C1C", secondaryColor: "#FFFFFF" },
    { name: "University of Massachusetts – Lowell", city: "Lowell, Massachusetts", conference: "America East Conference", color: "#003B7B", secondaryColor: "#C41E3A" },
    { name: "University of Michigan", city: "Ann Arbor, Michigan", conference: "Big Ten Conference", color: "#00274C", secondaryColor: "#FFCB05" },
    { name: "University of North Carolina at Chapel Hill", city: "Chapel Hill, North Carolina", conference: "Atlantic Coast Conference", color: "#7BAFD4", secondaryColor: "#FFFFFF" },
    { name: "University of Notre Dame", city: "Notre Dame, Indiana", conference: "Division I-A Independents", color: "#0C2340", secondaryColor: "#C99700" },
    { name: "University of Pennsylvania", city: "Philadelphia, Pennsylvania", conference: "Ivy League", color: "#011F5B", secondaryColor: "#C41E3A" },
    { name: "University of Richmond", city: "Virginia", conference: "Atlantic 10 Conference", color: "#B31B1B", secondaryColor: "#002D5C" },
    { name: "University of Utah", city: "Salt Lake City, Utah", conference: "Pacific-12 Conference", color: "#CC0000", secondaryColor: "#FFFFFF" },
    { name: "University of Vermont", city: "Burlington, Vermont", conference: "America East Conference", color: "#007155", secondaryColor: "#FFD700" },
    { name: "University of Virginia", city: "Charlottesville, Virginia", conference: "Atlantic Coast Conference", color: "#E57200", secondaryColor: "#002F6C" },
    { name: "Villanova University", city: "Villanova, Pennsylvania", conference: "Big East Conference", color: "#00205B", secondaryColor: "#FFFFFF" },
    { name: "Virginia Military Institute", city: "Lexington, Virginia", conference: "Big South Conference", color: "#C8102E", secondaryColor: "#FFD700" },
    { name: "Wagner College", city: "Staten Island, New York", conference: "Northeast Conference", color: "#00634C", secondaryColor: "#FFFFFF" },
    { name: "Yale University", city: "New Haven, Connecticut", conference: "Ivy League", color: "#00356B", secondaryColor: "#FFFFFF" }
];

// Get sorted list of school names
export function getSchoolNames() {
    return d1LacrosseSchools.map(school => school.name).sort();
}

// Search schools by name
export function searchSchools(query) {
    if (!query) return d1LacrosseSchools;

    const lowerQuery = query.toLowerCase();
    return d1LacrosseSchools.filter(school =>
        school.name.toLowerCase().includes(lowerQuery) ||
        school.city.toLowerCase().includes(lowerQuery) ||
        school.conference.toLowerCase().includes(lowerQuery)
    );
}

// Calculate color similarity (returns a value 0-1, where 1 is identical)
function colorSimilarity(color1, color2) {
    if (!color1 || !color2) return 0;

    // Convert hex to RGB
    const hexToRgb = (hex) => {
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? {
            r: parseInt(result[1], 16),
            g: parseInt(result[2], 16),
            b: parseInt(result[3], 16)
        } : null;
    };

    const rgb1 = hexToRgb(color1);
    const rgb2 = hexToRgb(color2);

    if (!rgb1 || !rgb2) return 0;

    // Calculate Euclidean distance in RGB space
    const distance = Math.sqrt(
        Math.pow(rgb1.r - rgb2.r, 2) +
        Math.pow(rgb1.g - rgb2.g, 2) +
        Math.pow(rgb1.b - rgb2.b, 2)
    );

    // Normalize to 0-1 (max distance is ~441 for RGB)
    // Return similarity (1 - normalized distance)
    // Colors are "similar" if distance < 100 (roughly)
    return 1 - (distance / 441);
}

// Check if two colors are too similar (threshold: 0.75 similarity)
function areColorsSimilar(color1, color2) {
    const similarity = colorSimilarity(color1, color2);
    return similarity > 0.75; // Colors with >75% similarity are considered "too similar"
}

// Get team color by name (with conflict resolution for Team A vs Team B)
export function getTeamColor(teamName, teamPosition = null, opponentName = null) {
    if (!teamName) return null;

    const school = d1LacrosseSchools.find(s =>
        s.name.toLowerCase() === teamName.toLowerCase()
    );

    if (!school) return null;

    // If no opponent or team position specified, return primary color
    if (!teamPosition || !opponentName) {
        return school.color;
    }

    // Get opponent's color
    const opponent = d1LacrosseSchools.find(s =>
        s.name.toLowerCase() === opponentName.toLowerCase()
    );

    if (!opponent) {
        return school.color;
    }

    // Check if colors are too similar
    if (areColorsSimilar(school.color, opponent.color)) {
        // Team A uses primary, Team B uses secondary
        if (teamPosition === 'B') {
            return school.secondaryColor || school.color;
        }
    }

    // Default: return primary color
    return school.color;
}
